<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Barn Sorter Item Directory</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">Barn Sorter Item Directory</div>
        <div class="subtitle">Search • sort • click an item to highlight its wall column</div>
      </div>

      <div class="searchRow">
        <input id="q" class="search" placeholder="Search (e.g. quartz, prismarine, ladders, G1-5)" autocomplete="off" />
        <button id="clear" class="btn">Clear</button>
      </div>
    </header>

    <div class="grid">
      <!-- DIRECTORY -->
      <div class="card">
        <div class="cardHead">
          <div class="label">DIRECTORY</div>
          <div class="pill"><span id="countNow">0</span> / <span id="countAll">0</span></div>
        </div>

        <div class="loaderBox">
          <div id="notice" class="notice" style="display:none"></div>

          <div id="pickerRow" class="pickerRow">
            <input id="file" type="file" accept=".csv,text/csv" />
            <button id="loadBtn" class="btn">Load CSV</button>
            <div class="file muted">Local file mode only</div>
          </div>

          <div class="muted2" style="font-size:11px;padding:0 2px 8px;">
            On GitHub Pages this loads <span class="mono">items.csv</span> automatically. If you open the file locally, you may need the picker.
          </div>
        </div>

        <div class="tableWrap">
          <table>
            <thead>
              <tr>
                <th id="thItem">ITEM <span class="arrow" id="arItem">▲</span></th>
                <th id="thLoc">LOCATION <span class="arrow" id="arLoc"></span></th>
                <th id="thCat">CATEGORY <span class="arrow" id="arCat"></span></th>
              </tr>
            </thead>
            <tbody id="rows"></tbody>
          </table>
        </div>
      </div>

      <!-- MAP -->
      <div class="card mapPanel" id="mapPanel">
        <div class="cardHead">
          <div class="label">BARN MAP</div>
          <div class="pill">Enter from North: East ← • South ↑ • West →</div>
        </div>

        <div class="mapBody">
          <div class="hint">Click an item (or a column) to highlight where it lives.</div>

          <!-- Excel-like single table layout -->
          <div class="tableMap" id="tableMap">
            <!-- South Wall -->
            <div class="tableSouth">
              <div class="tableSouthHead">South</div>
              <div class="letterRow" id="southCols"></div>
            </div>

            <!-- East Wall (A bottom, I top) -->
            <div class="tableSide">
              <div class="sideHead">East</div>
              <div class="letterCol" id="eastCols"></div>
            </div>

            <!-- Center: Selected item -->
            <div class="tableCenter" aria-live="polite">
              <div class="k">Item</div>
              <div class="mapOverlayTitle" id="selDesc2">—</div>

              <div class="centerGrid">
                <div>
                  <div class="k">Chest</div>
                  <div class="mono" id="selChest2">—</div>
                </div>

                <div>
                  <div class="k">Locator</div>
                  <div id="locator2" class="locator"></div>
                </div>
              </div>
            </div>

            <!-- West Wall -->
            <div class="tableSide">
              <div class="sideHead">West</div>
              <div class="letterCol" id="westCols"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
